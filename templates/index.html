<!-- templates/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Secure File Share</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body { font-family: Inter, Arial, sans-serif; background:#f3f6fb; color:#222; }
    .container { max-width:700px; margin:40px auto; background:white; padding:28px; border-radius:10px; box-shadow: 0 6px 18px rgba(20,30,60,0.08); }
    h1 { margin:0 0 8px; color:#0b3b6f; }
    p.lead { margin-top:0; color:#405569; }
    .form-row { margin-top:18px; }
    input[type=file] { display:block; margin-bottom:12px; }
    .btn { background:#0b79d0; color:white; padding:10px 16px; border-radius:8px; border:none; cursor:pointer; }
    .btn:hover { background:#0a6dc1; }
    .small { color:#5a6b7a; font-size:14px; margin-top:12px; }
    .msg { margin:14px 0; padding:10px; border-radius:6px; background:#eef7ff; color:#083d6b; }
    .download-row { display:flex; gap:8px; margin-top:10px; }
    input[type=text] { padding:8px; border-radius:6px; border:1px solid #d6dde4; flex:1; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ”’ Secure File Sharing</h1>
    <p class="lead">Upload files â€” they are encrypted with AES before saving. Decrypt on download.</p>

    {% if msg %}
      <div class="msg">{{ msg }}</div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
      <div class="form-row">
        <input type="file" name="file" required/>
        <button class="btn" type="submit">Upload & Encrypt</button>
      </div>
    </form>

    <hr/>

    <h3>Download</h3>
    <div class="download-row">
      <input id="fname" type="text" placeholder="Enter original filename (e.g. sample.txt)" />
      <button class="btn" onclick="doDownload()">Download</button>
    </div>
    <p class="small">Note: enter the filename exactly as uploaded (without <code>.enc</code>).</p>
  </div>

  <script>
    function doDownload(){
      const f = document.getElementById('fname').value.trim();
      if(!f) { alert('Enter filename'); return; }
      // encode URI component to support spaces etc.
      window.location.href = '/download/' + encodeURIComponent(f);
    }
  </script>
</body>
</html>
